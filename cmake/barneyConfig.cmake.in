## Copyright 2021-2024 The Khronos Group
## SPDX-License-Identifier: Apache-2.0

@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

set(THREADS_PREFER_PTHREAD_FLAG ON)
find_dependency(Threads)

if (OFF)
if (@CTS_ENABLE_GLTF@ OR @VIEWER_ENABLE_GLTF@)
  find_dependency(draco)
  find_dependency(WebP)
endif()
if (@VIEWER_ENABLE_KTX@)
  find_dependency(Ktx)
endif()
endif()

include(${CMAKE_CURRENT_LIST_DIR}/barney_Exports.cmake)

if (NOT TARGET barney::barney)
  message(FATAL_ERROR "CMAKE_PREFIX_PATH or barney_DIR are pointing to an \
  BARNEY-SDK build directory. Please do a full install of the SDK \
  (e.g. 'make install') and point to where you installed it \
  (CMAKE_INSTALL_PREFIX in your build of BARNEY-SDK). \
  Consuming BARNEY-SDK from a build directory is not supported.")
endif()

set(BARNEY_DATAROOTDIR
  ${CMAKE_CURRENT_LIST_DIR}/../../../@CMAKE_INSTALL_DATAROOTDIR@/barney
)

if (OFF)
if (@INSTALL_CODE_GEN_SCRIPTS@)
  set(BARNEY_CODE_GEN_ROOT ${BARNEY_DATAROOTDIR}/code_gen)
  include(${CMAKE_CURRENT_LIST_DIR}/cmake/barney_generate_frontend.cmake)
  include(${CMAKE_CURRENT_LIST_DIR}/cmake/barney_generate_codegen.cmake)
  set(barney_code_gen_FOUND 1)
elseif(barney_FIND_REQUIRED_code_gen)
  message(ERROR "The 'code_gen' component was requested but not found. To
  enable this component, the SDK must be built with \
  INSTALL_CODE_GEN_SCRIPTS=ON")
endif()

include(${CMAKE_CURRENT_LIST_DIR}/cmake/barney_sdk_fetch_project.cmake)
include(${CMAKE_CURRENT_LIST_DIR}/cmake/cmake_project_commands.cmake)

if (TARGET barney::barney_viewer)
  set(barney_viewer_FOUND 1)
elseif (barney_FIND_REQUIRED_viewer AND @INSTALL_VIEWER_LIBRARY@)
  add_subdirectory(
    ${BARNEY_DATAROOTDIR}/barney_viewer
    ${CMAKE_CURRENT_BINARY_DIR}/barney_viewer
  )
  set(barney_viewer_FOUND 1)
elseif(barney_FIND_REQUIRED_viewer)
  message(ERROR "The 'viewer' component was requested but not found. To
  enable this component, the SDK must be built with INSTALL_VIEWER_LIBRARY=ON")
endif()
endif()

check_required_components(@PROJECT_NAME@)
